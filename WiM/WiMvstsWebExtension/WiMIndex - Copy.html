<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>WorkitemManager</title>
    <script src="node_modules/vss-web-extension-sdk/lib/VSS.SDK.js"></script>
    <style>
        .open-existing-work-item, .open-existing-work-item {
            margin: 20px;
        }

        .work-item-types {
            width: 200px;
            display: inline-block;
            margin-left: 5px;
            margin-right: 5px;
            vertical-align: bottom;
        }

        #existing-wit-id {
            border: 1px solid #DDD;
        }
    </style>
</head>
<body>


    <h1>Hello to ASP.NET WiM World!!!005!!</h1>

    <div class="open-existing-work-item">
        <label for="existing-wit-id">Existing work item id:</label>
        <input id="existing-wit-id" value="2">
        <button id="existing-wit-button" onclick="idButtonClicked()" value="Open...">Open</button>
    </div>

    <p id="toel">nothing yet</p>

    <script type="text/javascript">

        //VSS.require(["VSS/Service", "TFS/WorkItemTracking/RestClient"], function (VSS_Service, TFS_Wit_WebApi) {
        //    // Get the REST client
        //    var witClient = VSS_Service.getCollectionClient(TFS_Wit_WebApi.WorkItemTrackingHttpClient);
        //    // ...
        //});

       function idButtonClicked() {
                var workitemID = document.getElementById("existing-wit-id").value;
                document.getElementById("toel").innerHTML = workitemID;
            };
//        document.getElementById("existing-wit-text").nodevalue = workitemid();

        //VSS.init({ usePlatformScripts: true, explicitNotifyLoaded: true });
        //VSS.require([
        //    "TFS/WorkItemTracking/Services",
        //    "TFS/WorkItemTracking/RestClient",
        //    "VSS/Controls",
        //    "VSS/Controls/Combos"], function (_WorkItemServices, _WorkItemRestClient, _Controls, _Combos) {

        //        VSS.notifyLoadSucceeded();

        //        var workItemTypesCombo;

        //        var witClient = _WorkItemRestClient.getClient();
        //        witClient.getWorkItemTypes(VSS.getWebContext().project.name).then(function (workItemTypes) {
        //            workItemTypesCombo = _Controls.create(_Combos.Combo, $(".work-item-types"), {
        //                source: $.map(workItemTypes, function (wiType) { return wiType.name })
        //            });
        //            if (workItemTypes.length > 0) {
        //                workItemTypesCombo.setText(workItemTypes[0].name);
        //            }
        //        });

        //        $("#existing-wit-button").click(function () {
        //            var workItemId = parseInt($("#existing-wit-id").val());
        //            if (workItemId > 0) {
        //                _WorkItemServices.WorkItemFormNavigationService.getService().then(function (workItemNavSvc) {
        //                    workItemNavSvc.openWorkItem(workItemId);
        //                });
        //            }
        //        });

                //$("#new-wit-button").click(function () {
                //    var workItemType = workItemTypesCombo ? workItemTypesCombo.getText() : "";
                //    if (workItemType) {
                //        _WorkItemServices.WorkItemFormNavigationService.getService().then(function (workItemNavSvc) {
                //            workItemNavSvc.openNewWorkItem(workItemType, {
                //                "Title": "Opened a work item from the Work Item Nav Service",
                //                "Tags": "extension;wit-service",
                //                "System.AssignedTo": VSS.getWebContext().user.name,
                //                "priority": 1
                //            });
                //        });
                //    }
                //});
            ///});
    </script>
</body>
</html>